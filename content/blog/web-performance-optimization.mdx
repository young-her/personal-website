---
title: "å‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŒ‡å—"
description: "ä»æ ¸å¿ƒ Web æŒ‡æ ‡åˆ°å®é™…ä¼˜åŒ–æŠ€å·§ï¼Œå…¨é¢æå‡ç½‘ç«™æ€§èƒ½çš„å®ç”¨æŒ‡å—ã€‚"
date: "2025-07-05"
author: "ç«™é•¿"
tags: ["æ€§èƒ½ä¼˜åŒ–", "Webæ€§èƒ½", "å‰ç«¯", "ç”¨æˆ·ä½“éªŒ"]
published: true
---

# å‰ç«¯æ€§èƒ½ä¼˜åŒ–å®æˆ˜æŒ‡å—

ç½‘ç«™æ€§èƒ½ç›´æ¥å½±å“ç”¨æˆ·ä½“éªŒå’Œæœç´¢å¼•æ“æ’åã€‚æœ¬æ–‡å°†ä»æ ¸å¿ƒ Web æŒ‡æ ‡å‡ºå‘ï¼Œæä¾›ç³»ç»Ÿæ€§çš„æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ã€‚

## ğŸ“Š æ ¸å¿ƒ Web æŒ‡æ ‡ (Core Web Vitals)

### 1. Largest Contentful Paint (LCP)

**ç›®æ ‡ï¼šâ‰¤ 2.5 ç§’**

LCP è¡¡é‡é¡µé¢ä¸»è¦å†…å®¹çš„åŠ è½½é€Ÿåº¦ï¼š

```html
<!-- ä¼˜åŒ–å‰ï¼šå¤§å›¾ç‰‡é˜»å¡æ¸²æŸ“ -->
<img src="hero-large.jpg" alt="Hero image" />

<!-- ä¼˜åŒ–åï¼šä½¿ç”¨é€‚å½“å°ºå¯¸å’Œæ ¼å¼ -->
<picture>
  <source media="(min-width: 768px)" srcset="hero-desktop.webp">
  <source media="(min-width: 480px)" srcset="hero-tablet.webp">
  <img src="hero-mobile.webp" alt="Hero image" loading="eager">
</picture>
```

### 2. First Input Delay (FID)

**ç›®æ ‡ï¼šâ‰¤ 100 æ¯«ç§’**

ä¼˜åŒ– JavaScript æ‰§è¡Œï¼š

```javascript
// ä½¿ç”¨ Web Workers å¤„ç†è®¡ç®—å¯†é›†å‹ä»»åŠ¡
const worker = new Worker('calculations.js')
worker.postMessage({ data: heavyData })

worker.onmessage = function(e) {
  // å¤„ç†ç»“æœï¼Œä¸é˜»å¡ä¸»çº¿ç¨‹
  updateUI(e.data)
}
```

### 3. Cumulative Layout Shift (CLS)

**ç›®æ ‡ï¼šâ‰¤ 0.1**

é˜²æ­¢å¸ƒå±€åç§»ï¼š

```css
/* ä¸ºå›¾ç‰‡é¢„ç•™ç©ºé—´ */
.image-container {
  aspect-ratio: 16/9;
  background: #f0f0f0;
}

/* é¿å…åŠ¨æ€å†…å®¹æ’å…¥ */
.ad-placeholder {
  min-height: 200px;
  display: flex;
  align-items: center;
  justify-content: center;
}
```

## ğŸš€ èµ„æºä¼˜åŒ–ç­–ç•¥

### 1. å›¾ç‰‡ä¼˜åŒ–

**ç°ä»£å›¾ç‰‡æ ¼å¼ï¼š**

```javascript
// Next.js Image ç»„ä»¶è‡ªåŠ¨ä¼˜åŒ–
import Image from 'next/image'

export default function OptimizedImage() {
  return (
    <Image
      src="/hero.jpg"
      alt="æè¿°"
      width={1200}
      height={600}
      priority={true}
      placeholder="blur"
      blurDataURL="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
    />
  )
}
```

**æ‡’åŠ è½½å®ç°ï¼š**

```javascript
// åŸç”Ÿæ‡’åŠ è½½
<img src="image.jpg" loading="lazy" alt="æè¿°" />

// Intersection Observer API
const imageObserver = new IntersectionObserver((entries, observer) => {
  entries.forEach(entry => {
    if (entry.isIntersecting) {
      const img = entry.target
      img.src = img.dataset.src
      img.classList.remove('lazy')
      observer.unobserve(img)
    }
  })
})

document.querySelectorAll('img[data-src]').forEach(img => {
  imageObserver.observe(img)
})
```

### 2. JavaScript ä¼˜åŒ–

**ä»£ç åˆ†å‰²ï¼š**

```javascript
// åŠ¨æ€å¯¼å…¥
const LazyComponent = lazy(() => import('./LazyComponent'))

// è·¯ç”±çº§åˆ«åˆ†å‰²
const BlogPage = lazy(() => import('./pages/Blog'))

function App() {
  return (
    <Router>
      <Suspense fallback={<Loading />}>
        <Route path="/blog" component={BlogPage} />
      </Suspense>
    </Router>
  )
}
```

**Tree Shakingï¼š**

```javascript
// é¿å…ï¼šå¯¼å…¥æ•´ä¸ªåº“
import _ from 'lodash'

// æ¨èï¼šåªå¯¼å…¥éœ€è¦çš„å‡½æ•°
import { debounce } from 'lodash/debounce'

// æˆ–ä½¿ç”¨ ES6 modules
import debounce from 'lodash.debounce'
```

### 3. CSS ä¼˜åŒ–

**å…³é”® CSS å†…è”ï¼š**

```html
<head>
  <style>
    /* å…³é”®è·¯å¾„ CSS */
    .header { ... }
    .hero { ... }
  </style>
  
  <!-- éå…³é”® CSS å¼‚æ­¥åŠ è½½ -->
  <link rel="preload" href="main.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="main.css"></noscript>
</head>
```

**CSS å®¹å™¨æŸ¥è¯¢ï¼š**

```css
/* å“åº”å¼è®¾è®¡çš„æ–°æ–¹æ³• */
.card-container {
  container-type: inline-size;
}

@container (min-width: 400px) {
  .card {
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
}
```

## ğŸ”„ ç¼“å­˜ç­–ç•¥

### 1. HTTP ç¼“å­˜

```javascript
// next.config.js
module.exports = {
  async headers() {
    return [
      {
        source: '/static/(.*)',
        headers: [
          {
            key: 'Cache-Control',
            value: 'public, max-age=31536000, immutable'
          }
        ]
      }
    ]
  }
}
```

### 2. Service Worker

```javascript
// sw.js
const CACHE_NAME = 'v1'
const urlsToCache = [
  '/',
  '/static/css/main.css',
  '/static/js/main.js'
]

self.addEventListener('install', event => {
  event.waitUntil(
    caches.open(CACHE_NAME)
      .then(cache => cache.addAll(urlsToCache))
  )
})

self.addEventListener('fetch', event => {
  event.respondWith(
    caches.match(event.request)
      .then(response => {
        if (response) {
          return response
        }
        return fetch(event.request)
      })
  )
})
```

## ğŸ“¡ ç½‘ç»œä¼˜åŒ–

### 1. èµ„æºé¢„åŠ è½½

```html
<!-- DNS é¢„è§£æ -->
<link rel="dns-prefetch" href="//fonts.googleapis.com">

<!-- é¢„è¿æ¥ -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<!-- é¢„åŠ è½½å…³é”®èµ„æº -->
<link rel="preload" href="hero.jpg" as="image">

<!-- é¢„è·å–ä¸‹ä¸ªé¡µé¢èµ„æº -->
<link rel="prefetch" href="/next-page.html">
```

### 2. HTTP/2 æ¨é€

```javascript
// æœåŠ¡å™¨æ¨é€å…³é”®èµ„æº
app.get('/', (req, res) => {
  res.push('/critical.css', {
    headers: {
      'content-type': 'text/css'
    }
  })
  res.push('/app.js', {
    headers: {
      'content-type': 'application/javascript'
    }
  })
  res.render('index')
})
```

## ğŸ”§ æ€§èƒ½ç›‘æ§

### 1. Web Vitals ç›‘æ§

```javascript
import { getCLS, getFID, getFCP, getLCP, getTTFB } from 'web-vitals'

function sendToAnalytics(metric) {
  // å‘é€åˆ°åˆ†ææœåŠ¡
  gtag('event', metric.name, {
    value: Math.round(metric.value),
    metric_id: metric.id,
    metric_value: metric.value,
    metric_delta: metric.delta
  })
}

getCLS(sendToAnalytics)
getFID(sendToAnalytics)
getFCP(sendToAnalytics)
getLCP(sendToAnalytics)
getTTFB(sendToAnalytics)
```

### 2. Performance Observer

```javascript
// ç›‘æ§èµ„æºåŠ è½½
const observer = new PerformanceObserver((list) => {
  list.getEntries().forEach((entry) => {
    if (entry.duration > 1000) {
      console.warn(`æ…¢èµ„æº: ${entry.name} - ${entry.duration}ms`)
    }
  })
})

observer.observe({ entryTypes: ['resource'] })
```

## ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–

### 1. è§†å£ä¼˜åŒ–

```html
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
```

### 2. è§¦æ‘¸ä¼˜åŒ–

```css
/* å¢å¤§è§¦æ‘¸ç›®æ ‡ */
.button {
  min-height: 44px;
  min-width: 44px;
  padding: 12px 24px;
}

/* ä¼˜åŒ–æ»šåŠ¨æ€§èƒ½ */
.scroll-container {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}
```

## ğŸ” æ€§èƒ½æµ‹è¯•å·¥å…·

### 1. Lighthouse CI

```yaml
# .github/workflows/lighthouse.yml
name: Lighthouse CI
on: [push]
jobs:
  lighthouse:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - name: Lighthouse CI Action
        uses: treosh/lighthouse-ci-action@v8
        with:
          configPath: './lighthouserc.json'
```

### 2. Bundle åˆ†æ

```javascript
// åˆ†æåŒ…å¤§å°
const withBundleAnalyzer = require('@next/bundle-analyzer')({
  enabled: process.env.ANALYZE === 'true'
})

module.exports = withBundleAnalyzer({
  // Next.js é…ç½®
})
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–æ¸…å•

### åŠ è½½æ€§èƒ½
- [ ] å‹ç¼©å’Œä¼˜åŒ–å›¾ç‰‡
- [ ] ä½¿ç”¨ WebP/AVIF æ ¼å¼
- [ ] å®æ–½æ‡’åŠ è½½
- [ ] ä»£ç åˆ†å‰²å’Œ Tree Shaking
- [ ] å¯ç”¨ Gzip/Brotli å‹ç¼©

### æ¸²æŸ“æ€§èƒ½
- [ ] å‡å°‘ DOM èŠ‚ç‚¹æ•°é‡
- [ ] é¿å…å¼ºåˆ¶åŒæ­¥å¸ƒå±€
- [ ] ä½¿ç”¨ CSS transforms è€Œéæ”¹å˜å¸ƒå±€å±æ€§
- [ ] ä¼˜åŒ–åŠ¨ç”»æ€§èƒ½

### ç¼“å­˜ç­–ç•¥
- [ ] è®¾ç½®é€‚å½“çš„ HTTP ç¼“å­˜å¤´
- [ ] å®æ–½ Service Worker
- [ ] ä½¿ç”¨ CDN åˆ†å‘é™æ€èµ„æº

### ç”¨æˆ·ä½“éªŒ
- [ ] å®ç°éª¨æ¶å±
- [ ] ä¼˜åŒ–å­—ä½“åŠ è½½
- [ ] å‡å°‘ CLS

## æ€»ç»“

æ€§èƒ½ä¼˜åŒ–æ˜¯ä¸€ä¸ªæŒç»­çš„è¿‡ç¨‹ï¼Œéœ€è¦ï¼š

1. **å»ºç«‹åŸºå‡†çº¿** - ä½¿ç”¨ Lighthouse ç­‰å·¥å…·æµ‹é‡å½“å‰æ€§èƒ½
2. **è®¾å®šç›®æ ‡** - åŸºäºä¸šåŠ¡éœ€æ±‚è®¾å®šæ€§èƒ½ç›®æ ‡
3. **é€æ­¥ä¼˜åŒ–** - ä¼˜å…ˆå¤„ç†å½±å“æœ€å¤§çš„é—®é¢˜
4. **æŒç»­ç›‘æ§** - å»ºç«‹æ€§èƒ½ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

è®°ä½ï¼š**æµ‹é‡ â†’ ä¼˜åŒ– â†’ éªŒè¯** çš„å¾ªç¯æ˜¯æ€§èƒ½ä¼˜åŒ–çš„å…³é”®ã€‚

æ€§èƒ½ä¸æ˜¯ä¸€ä¸ªåŠŸèƒ½ï¼Œè€Œæ˜¯æ‰€æœ‰åŠŸèƒ½çš„åŸºç¡€ã€‚æŠ•èµ„äºæ€§èƒ½ä¼˜åŒ–ï¼Œå°±æ˜¯æŠ•èµ„äºç”¨æˆ·ä½“éªŒå’Œä¸šåŠ¡æˆåŠŸã€‚ 